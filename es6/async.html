<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script>
        // ==========================async 返回值是一个promise=====================
        // async function fn(){
        //     return 'welcome';
        // }
        // // console.log(fn())
        // fn().then(res =>{
        //     console.log(res);
        // })



        // =============================== 演示出错捕获 =============================
        // async function fn() {
        //    throw new Error('Error出错了');
        // }
        // fn().then(res => {
        //     console.log(res);
        // },err=>{
        //     console.log(err);
        // })

        // ==================== catch 捕获=============================
        // async function fn() {
        //    throw new Error('Error出错了');
        // }
        // fn().then(res => {
        //     console.log(res);
        // }).catch(err=>{
        //     console.log(res);
        // })

        // ===============只要 await 语句后面 promise 状态变成 reject，那么整个 async 函数会中断执行 ===
        // async function fn(){
        //     await Promise.reject("出错了");
        //     await Promise.resolve('success');
        // }

        // fn().then(res =>{
        //     console.log(res);
        // }).catch(err=>{
        //     console.log(err);
        // })

        //==========================try catch 解决async 中断问题==========
        // async function fn() {
        //     try {
        //         await Promise.reject("出错了");
        //     } catch (er) {

        //     }
        //     let a = await Promise.resolve('success');
        //     console.log(a);
        // }

        // fn().then(res => {
        //     console.log(res);
        // }).catch(err => {
        //     console.log(err);
        // })

        // =========================== Promise catch ===============
        async function fn() {
            await Promise.reject("出错了").catch(err=>{
                console.log(err);
            });

            let a = await Promise.resolve('success');
            console.log(a);
        }

        fn().then(res => {
            console.log(res);
        });
    </script>
</head>

<body>

</body>

</html>